---
import PhotoSlider from './PhotoSlider.astro';

const photos2025 = [
  { src: '/2025/555915615_1410452524416612_4136718030728151101_n.jpg', alt: 'Biegacze Retkińskiej Piątki 2025', photographer: 'EKo Foto' },
  { src: '/2025/556572935_24461685070183767_138188670356277265_n.jpg', alt: 'Atmosfera biegu Retkińska Piątka 2025', photographer: 'Piotr Drzewiecki' },
  { src: '/2025/557052807_24461683983517209_8870246271793826789_n.jpg', alt: 'Retkińska Piątka 2025', photographer: 'Piotr Drzewiecki' },
  { src: '/2025/dzieci.jpg', alt: 'Dzieci biorące udział w Retkińskiej Piątce 2025', photographer: 'EKo Foto' },
  { src: '/2025/556090655_1095362906143663_3204512997630037629_n.jpg', alt: 'Meta Retkińskiej Piątki 2025', photographer: 'Kejti Grabz Foto' },
  { src: '/2025/557600692_24461683956850545_4895900737268212242_n.jpg', alt: 'Medale Retkińskiej Piątki 2025', photographer: 'Piotr Drzewiecki' },
];

const photos2024 = [
  { src: '/2024/JEDEN-Bieg-Parafialny-dla-fundacji-Gajusz-Fot-Sebastian-Szwajkowski-24-1.webp', alt: 'Bieg Parafialny dla Fundacji Gajusz 2024', photographer: 'Sebastian Szwajkowski' },
  { src: '/2024/Bieg-Parafialny-dla-fundacji-Gajusz-Fot-Sebastian-Szwajkowski-6.webp', alt: 'Uczestnicy biegu charytatywnego 2024', photographer: 'Sebastian Szwajkowski' },
  { src: '/2024/Bieg-Parafialny-dla-fundacji-Gajusz-Fot-Sebastian-Szwajkowski-18.jpg', alt: 'Biegacze na trasie 2024', photographer: 'Sebastian Szwajkowski' },
  { src: '/2024/Bieg-Parafialny-dla-fundacji-Gajusz-Fot-Sebastian-Szwajkowski-26.webp', alt: 'Atmosfera biegu 2024', photographer: 'Sebastian Szwajkowski' },
  { src: '/2024/Bieg-Parafialny-dla-fundacji-Gajusz-Fot-Sebastian-Szwajkowski-41.jpg', alt: 'Meta biegu charytatywnego 2024', photographer: 'Sebastian Szwajkowski' },
];

const editions = [
  {
    year: '2025',
    eventUrl: 'https://www.facebook.com/events/9897692227012010/?active_tab=about',
    participants: '300+',
    charity: 'Fundacja Rampa',
    charityUrl: 'https://rampa.org.pl/',
    achievement: 'Wsparcie działań przeciwko wykluczeniu społecznemu',
    color: 'brand-teal',
    photos: photos2025,
    galleries: [
      { name: 'EKo Foto', url: 'https://www.facebook.com/media/set/?vanity=EKofoty&set=a.1410445934417271' },
      { name: 'Piotr Drzewiecki', url: 'https://www.facebook.com/media/set/?vanity=piotr.fotograf&set=a.24461702373515370' },
      { name: 'Kejti Grabz Foto', url: 'https://www.facebook.com/media/set/?vanity=kejtigrabzfoto&set=a.1095361909477096' },
    ],
    results: [
      { name: 'Dzieci 300m', url: 'https://time4s.pl/uploads/wyniki-kids-300-68dcefabcd093.pdf' },
      { name: 'Dzieci 500m', url: 'https://time4s.pl/uploads/wyniki-kids-500-68dcefb1c40a7.pdf' },
      { name: '5km open', url: 'https://time4s.pl/uploads/wynik-5km-open-68dcefb795760.pdf' },
      { name: '5km kat.', url: 'https://time4s.pl/uploads/wynik-5km-open-kat-68dcefbbe65f6.pdf' },
    ],
  },
  {
    year: '2024',
    eventUrl: 'https://www.facebook.com/events/857897959087337/',
    participants: '200+',
    charity: 'Fundacja Gajusz',
    charityUrl: '#',
    achievement: 'Podnośnik rehabilitacyjny dla chorych dzieci',
    color: 'brand-yellow',
    photos: photos2024,
    galleries: [
      { name: 'Eucharystia', url: 'https://eucharystia.org/parafialny-bieg-charytatywny/' },
      { name: 'Piotr Drzewiecki', url: 'https://www.facebook.com/media/set/?set=a.7985509378227930&type=3' },
      { name: 'Radio Łódź', url: 'https://radiolodz.pl/bieg-charytatywny-na-rzecz-fundacji-gajusz-zdjecia,429813/' },
    ],
    results: [
      { name: '5km open', url: 'https://time4s.pl/uploads/wyniki-parafialny-bieg-charytatywny-open-5km-66e7c6b6d2f87.pdf' },
    ],
  },
]
---

<section id="poprzednie-edycje" class="relative py-12 lg:py-16 bg-ink overflow-hidden">
  <!-- Large decorative text -->
  <div class="absolute right-0 top-1/2 -translate-y-1/2 font-display text-[20rem] lg:text-[40rem] text-white/[0.02] leading-none pointer-events-none select-none whitespace-nowrap" aria-hidden="true">
    2024—25
  </div>

  <div class="container-wide relative z-10">
    <!-- Header -->
    <div class="mb-8">
      <span class="section-label text-white/40 before:bg-brand-yellow">Historia</span>
      <h2 class="font-display text-4xl lg:text-5xl text-white mt-2">
        Poprzednie <span class="text-brand-yellow">edycje</span>
      </h2>
    </div>

    <!-- Editions Grid -->
    <div class="grid lg:grid-cols-2 gap-8">
      {editions.map((edition, index) => (
        <article class="group relative bg-white/5 backdrop-blur-sm border border-white/10 overflow-hidden">
          <!-- Year badge -->
          {edition.eventUrl ? (
            <a
              href={edition.eventUrl}
              target="_blank"
              rel="noopener noreferrer"
              class={`absolute top-0 right-0 bg-${edition.color} px-6 py-3 z-20 hover:scale-105 transition-transform`}
            >
              <span class={`font-display text-3xl ${edition.color === 'brand-yellow' ? 'text-ink' : 'text-white'}`}>
                {edition.year}
              </span>
            </a>
          ) : (
            <div class={`absolute top-0 right-0 bg-${edition.color} px-6 py-3 z-20`}>
              <span class={`font-display text-3xl ${edition.color === 'brand-yellow' ? 'text-ink' : 'text-white'}`}>
                {edition.year}
              </span>
            </div>
          )}

          <!-- Photo area -->
          <div class="aspect-video bg-white/5 relative overflow-hidden">
            {edition.photos ? (
              <PhotoSlider photos={edition.photos} />
            ) : (
              <div class="absolute inset-0 flex items-center justify-center">
                <div class="text-center">
                  <svg class="w-16 h-16 text-white/20 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                  </svg>
                  <p class="text-white/30 text-sm font-body">Zdjęcia z edycji {edition.year}</p>
                  {edition.photosUrl && (
                    <a
                      href={edition.photosUrl}
                      target="_blank"
                      rel="noopener noreferrer"
                      class="inline-block mt-3 text-brand-yellow hover:underline text-sm"
                    >
                      Zobacz galerię →
                    </a>
                  )}
                </div>
              </div>
            )}
          </div>

          <!-- Content -->
          <div class="p-5 space-y-4">
            <!-- Charity info - one line -->
            <div class="flex items-center gap-2">
              <span class="text-white/60 font-headline text-lg">Cel:</span>
              <a
                href={edition.charityUrl}
                target="_blank"
                rel="noopener noreferrer"
                class="font-headline text-lg text-white hover:text-brand-yellow transition-colors"
              >
                {edition.charity}
              </a>
            </div>

            <!-- Photo galleries -->
            {edition.galleries && edition.galleries.length > 0 && (
              <div class="flex flex-wrap items-center gap-2">
                <span class="text-white/60 font-headline text-lg">Galerie:</span>
                {edition.galleries.map((gallery) => (
                  <a
                    href={gallery.url}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="inline-flex items-center gap-2 px-3 py-1.5 bg-white/5 hover:bg-brand-yellow hover:text-ink text-white/70 text-sm font-body transition-all duration-200"
                  >
                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                      <path d="M12 2.04c-5.5 0-10 4.49-10 10.02 0 5 3.66 9.15 8.44 9.9v-7H7.9v-2.9h2.54V9.85c0-2.51 1.49-3.89 3.78-3.89 1.09 0 2.23.19 2.23.19v2.47h-1.26c-1.24 0-1.63.77-1.63 1.56v1.88h2.78l-.45 2.9h-2.33v7a10 10 0 008.44-9.9c0-5.53-4.5-10.02-10-10.02z"/>
                    </svg>
                    {gallery.name}
                  </a>
                ))}
              </div>
            )}

            <!-- Results -->
            {edition.results && edition.results.length > 0 && (
              <div class="flex flex-wrap items-center gap-2">
                <span class="text-white/60 font-headline text-lg">Wyniki:</span>
                {edition.results.map((result) => (
                  <a
                    href={result.url}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="inline-flex items-center gap-2 px-3 py-1.5 bg-white/5 hover:bg-brand-yellow hover:text-ink text-white/70 text-sm font-body transition-all duration-200"
                  >
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                    </svg>
                    {result.name}
                  </a>
                ))}
              </div>
            )}
          </div>
        </article>
      ))}
    </div>
  </div>
</section>

<style>
  /* Fix for dynamic class */
  .bg-brand-teal { background-color: var(--color-brand-teal); }
  .bg-brand-yellow { background-color: var(--color-brand-yellow); }
</style>
